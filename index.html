<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day-in-the-Life Mapper | Fluent UI</title>
  <style>
    /* Base styles keep the page comfortable while Fluent handles components */
    body {
      margin: 0;
      font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      background: radial-gradient(120% 80% at 50% 0%, #eef2ff 0%, #f7f8fb 55%, #ffffff 100%);
      color: #201f1f;
      min-height: 100vh;
    }
    #root { padding: 18px; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useMemo, useState } from "https://esm.sh/react@18.2.0";
    import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";
    import {
      FluentProvider,
      webLightTheme,
      Card,
      CardHeader,
      Button,
      Input,
      Textarea,
      Field,
      makeStyles,
      tokens,
      Title3,
      Subtitle2,
      Text,
      Tag,
      TagGroup,
      Divider,
      Body1Strong
    } from "https://esm.sh/@fluentui/react-components@9.49.0";

    const useStyles = makeStyles({
      shell: {
        maxWidth: "1200px",
        margin: "0 auto",
        display: "flex",
        flexDirection: "column",
        gap: tokens.spacingVerticalXL
      },
      header: {
        display: "flex",
        flexDirection: "column",
        gap: tokens.spacingVerticalS
      },
      grid: {
        display: "grid",
        gap: tokens.spacingHorizontalM,
        gridTemplateColumns: "repeat(auto-fit, minmax(320px, 1fr))"
      },
      stack: { display: "flex", flexDirection: "column", gap: tokens.spacingVerticalM },
      row: { display: "flex", gap: tokens.spacingHorizontalS, alignItems: "flex-end" },
      tagGroup: { display: "flex", flexWrap: "wrap", gap: tokens.spacingHorizontalS },
      summaryGrid: {
        display: "grid",
        gap: tokens.spacingHorizontalL,
        gridTemplateColumns: "repeat(auto-fit, minmax(250px, 1fr))"
      },
      muted: { color: tokens.colorNeutralForeground3 }
    });

    const AddableList = ({ label, placeholder, items, onAdd, onRemove }) => {
      const [value, setValue] = useState("");

      const handleAdd = () => {
        const trimmed = value.trim();
        if (!trimmed) return;
        onAdd(trimmed);
        setValue("");
      };

      return (
        <div className="list">
          <Field label={label} required>
            <div style={{ display: "flex", gap: tokens.spacingHorizontalXS }}>
              <Input
                value={value}
                placeholder={placeholder}
                onChange={(_, data) => setValue(data.value)}
                onKeyDown={(e) => {
                  if (e.key === "Enter") {
                    e.preventDefault();
                    handleAdd();
                  }
                }}
              />
              <Button appearance="primary" onClick={handleAdd}>Add</Button>
            </div>
          </Field>
          <div style={{ marginTop: tokens.spacingVerticalS }}>
            <TagGroup aria-label={`${label} list`}>
              {items.length === 0 && <Text className="muted">Nothing added yet.</Text>}
              {items.map((item, idx) => (
                <Tag
                  key={`${item}-${idx}`}
                  shape="rounded"
                  appearance="brand"
                  dismissible
                  onDismiss={() => onRemove(idx)}
                >
                  {item}
                </Tag>
              ))}
            </TagGroup>
          </div>
        </div>
      );
    };

    const SummarySection = ({ title, value, fallback, tags }) => (
      <div>
        <Body1Strong>{title}</Body1Strong>
        {tags ? (
          <TagGroup aria-label={`${title} summary`} style={{ marginTop: tokens.spacingVerticalXS }}>
            {tags.length === 0 ? <Text className="muted">{fallback}</Text> : tags.map((t, i) => (
              <Tag key={`${t}-${i}`} appearance="outline" shape="rounded">{t}</Tag>
            ))}
          </TagGroup>
        ) : (
          <Text className={value ? "" : "muted"}>
            {value || fallback}
          </Text>
        )}
      </div>
    );

    const App = () => {
      const styles = useStyles();
      const [roleName, setRoleName] = useState("");
      const [headcount, setHeadcount] = useState("");
      const [description, setDescription] = useState("");
      const [goals, setGoals] = useState([]);
      const [tools, setTools] = useState([]);
      const [collaborators, setCollaborators] = useState([]);
      const [painPoints, setPainPoints] = useState([]);

      const summary = useMemo(() => ({
        role: roleName || "Not set",
        headcount: headcount || "Not set",
        description: description || "No description yet.",
        goals,
        tools,
        collaborators,
        painPoints
      }), [roleName, headcount, description, goals, tools, collaborators, painPoints]);

      return (
        <FluentProvider theme={webLightTheme}>
          <div className={styles.shell}>
            <header className={styles.header}>
              <Title3>Day-in-the-Life Mapper</Title3>
              <Text className={styles.muted}>Capture a role, collaborators, tools, goals, and pain points with Fluent UI.</Text>
            </header>

            <div className={styles.grid}>
              <Card>
                <CardHeader
                  header={<Subtitle2>Role Overview</Subtitle2>}
                  description={<Text className={styles.muted}>Role basics that inform everything else.</Text>}
                />
                <div className={styles.stack}>
                  <Field label="Role" required>
                    <Input placeholder="e.g., Customer Support Specialist" value={roleName} onChange={(_, d) => setRoleName(d.value)} />
                  </Field>
                  <Field label="Number of employees">
                    <Input type="number" min={0} placeholder="e.g., 15" value={headcount} onChange={(_, d) => setHeadcount(d.value)} />
                  </Field>
                  <Field label="Description">
                    <Textarea placeholder="What does a typical day look like?" value={description} onChange={(_, d) => setDescription(d.value)} />
                  </Field>
                </div>
              </Card>

              <Card>
                <CardHeader header={<Subtitle2>Goals</Subtitle2>} description={<Text className={styles.muted}>Desired outcomes.</Text>} />
                <AddableList
                  label="Goal"
                  placeholder="Add a goal"
                  items={goals}
                  onAdd={(v) => setGoals([...goals, v])}
                  onRemove={(idx) => setGoals(goals.filter((_, i) => i !== idx))}
                />
              </Card>

              <Card>
                <CardHeader header={<Subtitle2>Tools</Subtitle2>} description={<Text className={styles.muted}>Systems and instruments.</Text>} />
                <AddableList
                  label="Tool"
                  placeholder="Add a tool"
                  items={tools}
                  onAdd={(v) => setTools([...tools, v])}
                  onRemove={(idx) => setTools(tools.filter((_, i) => i !== idx))}
                />
              </Card>

              <Card>
                <CardHeader header={<Subtitle2>Collaborators</Subtitle2>} description={<Text className={styles.muted}>Roles that partner with this one.</Text>} />
                <AddableList
                  label="Collaborator"
                  placeholder="Add a collaborating role"
                  items={collaborators}
                  onAdd={(v) => setCollaborators([...collaborators, v])}
                  onRemove={(idx) => setCollaborators(collaborators.filter((_, i) => i !== idx))}
                />
              </Card>

              <Card>
                <CardHeader header={<Subtitle2>Pain Points</Subtitle2>} description={<Text className={styles.muted}>Friction, blockers, risks.</Text>} />
                <AddableList
                  label="Pain point"
                  placeholder="Add a pain point"
                  items={painPoints}
                  onAdd={(v) => setPainPoints([...painPoints, v])}
                  onRemove={(idx) => setPainPoints(painPoints.filter((_, i) => i !== idx))}
                />
              </Card>

              <Card>
                <CardHeader
                  header={<Subtitle2>Summary</Subtitle2>}
                  description={<Text className={styles.muted}>Live view of the day-in-the-life.</Text>}
                />
                <div className={styles.stack}>
                  <div className={styles.summaryGrid}>
                    <SummarySection title="Role" value={summary.role} fallback="Not set" />
                    <SummarySection title="Headcount" value={summary.headcount} fallback="Not set" />
                  </div>
                  <Divider />
                  <SummarySection title="Description" value={summary.description} fallback="No description yet." />
                  <Divider />
                  <div className={styles.summaryGrid}>
                    <SummarySection title="Goals" tags={summary.goals} fallback="No goals captured yet." />
                    <SummarySection title="Tools" tags={summary.tools} fallback="No tools captured yet." />
                    <SummarySection title="Collaborators" tags={summary.collaborators} fallback="No collaborators captured yet." />
                    <SummarySection title="Pain Points" tags={summary.painPoints} fallback="No pain points captured yet." />
                  </div>
                </div>
              </Card>
            </div>
          </div>
        </FluentProvider>
      );
    };

    const root = createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
